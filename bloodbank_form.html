<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register Blood Bank | LifeLink+</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        
        /* Custom Focus Ring for Red Theme */
        .focus-input:focus {
            border-color: #ef4444;
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
        }

        /* Smooth Card Hover */
        .form-section {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .form-section:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        /* Custom Checkbox Styling */
        .service-checkbox:checked + div {
            background-color: #fef2f2; /* Red-50 */
            border-color: #ef4444; /* Red-500 */
            color: #b91c1c; /* Red-700 */
        }
        .service-checkbox:checked + div i {
            color: #ef4444;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- NAVBAR -->
    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center gap-2">
                    <i class="fa-solid fa-heart-pulse text-red-600 text-2xl"></i>
                    <span class="font-bold text-xl tracking-tight text-slate-900">LifeLink+</span>
                </div>
                <a href="index.html" class="text-sm font-medium text-slate-500 hover:text-red-600 transition">
                    <i class="fa-solid fa-arrow-left mr-1"></i> Back to Home
                </a>
            </div>
        </div>
    </nav>

    <!-- HEADER -->
    <header class="bg-slate-900 text-white py-12 relative overflow-hidden">
        <!-- decorative element -->
        <div class="absolute top-0 right-0 -mr-10 -mt-10 w-40 h-40 bg-red-600 rounded-full opacity-20 blur-3xl"></div>
        <div class="absolute bottom-0 left-0 -ml-10 -mb-10 w-40 h-40 bg-blue-600 rounded-full opacity-20 blur-3xl"></div>

        <div class="max-w-4xl mx-auto px-6 text-center relative z-10">
            <div class="inline-flex items-center justify-center w-16 h-16 bg-slate-800 rounded-2xl mb-4 shadow-lg border border-slate-700">
                <i class="fa-solid fa-building-columns text-3xl text-red-500"></i>
            </div>
            <h1 class="text-3xl md:text-4xl font-bold mb-3">Register Your Blood Bank</h1>
            <p class="text-slate-300 text-lg max-w-2xl mx-auto">Join our verified platelet & rare-blood emergency network to save lives efficiently.</p>
        </div>
    </header>

    <!-- MAIN FORM -->
    <main class="max-w-4xl mx-auto px-6 py-10 -mt-8 relative z-20">
        <form id="bloodBankForm" onsubmit="handleRegistration(event)" class="space-y-8">

            <!-- SECTION 1: ORGANIZATION DETAILS -->
            <section class="bg-white p-8 rounded-2xl shadow-sm border border-slate-200 form-section">
                <h2 class="text-lg font-bold text-slate-800 mb-6 flex items-center gap-3 border-b border-slate-100 pb-4">
                    <span class="flex items-center justify-center w-8 h-8 rounded-full bg-red-100 text-red-600 text-sm font-bold">1</span>
                    Organization Details
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="md:col-span-2">
                        <label class="block text-sm font-bold text-slate-700 mb-2">Blood Bank Name <span class="text-red-500">*</span></label>
                        <input type="text" id="bankName" required placeholder="e.g. Red Cross Regional Blood Center" class="w-full p-3 bg-slate-50 border border-slate-300 rounded-xl outline-none focus-input transition">
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-slate-700 mb-2">Parent Hospital <span class="text-slate-400 font-normal">(Optional)</span></label>
                        <input type="text" id="parentHospital" placeholder="If attached to a hospital" class="w-full p-3 bg-slate-50 border border-slate-300 rounded-xl outline-none focus-input transition">
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-slate-700 mb-2">Category <span class="text-red-500">*</span></label>
                        <select id="category" required class="w-full p-3 bg-slate-50 border border-slate-300 rounded-xl outline-none focus-input transition">
                            <option value="">Select Category</option>
                            <option value="Government">Government</option>
                            <option value="Private">Private</option>
                            <option value="Charitable">Charitable Trust</option>
                            <option value="NGO">NGO</option>
                        </select>
                    </div>

                    <div class="md:col-span-2">
                        <label class="block text-sm font-bold text-slate-700 mb-2">License / Registration Number <span class="text-red-500">*</span></label>
                        <input type="text" id="licenseNo" required placeholder="e.g. BB-LIC-2025-XXXX" class="w-full p-3 bg-slate-50 border border-slate-300 rounded-xl outline-none focus-input transition font-mono uppercase">
                    </div>
                </div>
            </section>

            <!-- SECTION 2: LOCATION & CONTACT -->
            <section class="bg-white p-8 rounded-2xl shadow-sm border border-slate-200 form-section">
                <h2 class="text-lg font-bold text-slate-800 mb-6 flex items-center gap-3 border-b border-slate-100 pb-4">
                    <span class="flex items-center justify-center w-8 h-8 rounded-full bg-red-100 text-red-600 text-sm font-bold">2</span>
                    Location & Contact
                </h2>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-bold text-slate-700 mb-2">Contact Person Name <span class="text-red-500">*</span></label>
                        <input type="text" id="contactName" required placeholder="Administrator Name" class="w-full p-3 bg-slate-50 border border-slate-300 rounded-xl outline-none focus-input transition">
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-slate-700 mb-2">Mobile Number <span class="text-red-500">*</span></label>
                        <input type="tel" id="mobile" required pattern="[0-9]{10}" placeholder="10 Digit Mobile" class="w-full p-3 bg-slate-50 border border-slate-300 rounded-xl outline-none focus-input transition">
                    </div>

                    <div class="md:col-span-2">
                        <label class="block text-sm font-bold text-slate-700 mb-2">Email Address <span class="text-red-500">*</span></label>
                        <input type="email" id="email" required placeholder="official@bloodbank.com" class="w-full p-3 bg-slate-50 border border-slate-300 rounded-xl outline-none focus-input transition">
                        <p class="hidden text-xs text-red-500 mt-1" id="emailError">Please enter a valid email address.</p>
                    </div>

                    <div class="md:col-span-2">
                        <label class="block text-sm font-bold text-slate-700 mb-2">Address Line 1 <span class="text-red-500">*</span></label>
                        <input type="text" id="address1" required placeholder="Building, Street" class="w-full p-3 bg-slate-50 border border-slate-300 rounded-xl outline-none focus-input transition">
                    </div>

                    <div class="md:col-span-2">
                        <label class="block text-sm font-bold text-slate-700 mb-2">Address Line 2 <span class="text-slate-400 font-normal">(Optional)</span></label>
                        <input type="text" id="address2" placeholder="Area, Landmark" class="w-full p-3 bg-slate-50 border border-slate-300 rounded-xl outline-none focus-input transition">
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-slate-700 mb-2">City <span class="text-red-500">*</span></label>
                        <select id="city" required class="w-full p-3 bg-slate-50 border border-slate-300 rounded-xl outline-none focus-input transition">
                            <option value="">Select City</option>
                            <option value="Bangalore">Bengaluru</option>
                            <option value="Mumbai">Mumbai</option>
                            <option value="Delhi">Delhi</option>
                            <option value="Chennai">Chennai</option>
                            <option value="Kolkata">Kolkata</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-slate-700 mb-2">State <span class="text-red-500">*</span></label>
                        <select id="state" required class="w-full p-3 bg-slate-50 border border-slate-300 rounded-xl outline-none focus-input transition">
                            <option value="">Select State</option>
                            <option value="Karnataka">Karnataka</option>
                            <option value="Maharashtra">Maharashtra</option>
                            <option value="Delhi">Delhi</option>
                            <option value="Tamil Nadu">Tamil Nadu</option>
                            <option value="West Bengal">West Bengal</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-slate-700 mb-2">PIN Code <span class="text-red-500">*</span></label>
                        <input type="text" id="pincode" required pattern="[0-9]{6}" maxlength="6" placeholder="6 Digit PIN" class="w-full p-3 bg-slate-50 border border-slate-300 rounded-xl outline-none focus-input transition">
                        <p class="hidden text-xs text-red-500 mt-1" id="pinError">PIN Code must be 6 digits.</p>
                    </div>
                </div>
            </section>

            <!-- SECTION 3: CAPABILITIES & SERVICES -->
            <section class="bg-white p-8 rounded-2xl shadow-sm border border-slate-200 form-section">
                <h2 class="text-lg font-bold text-slate-800 mb-6 flex items-center gap-3 border-b border-slate-100 pb-4">
                    <span class="flex items-center justify-center w-8 h-8 rounded-full bg-red-100 text-red-600 text-sm font-bold">3</span>
                    Services & Capabilities
                </h2>

                <div class="mb-8">
                    <label class="block text-sm font-bold text-slate-700 mb-4">Services Provided <span class="text-red-500">*</span> <span class="text-xs font-normal text-slate-500">(Select all that apply)</span></label>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <label class="cursor-pointer relative">
                            <input type="checkbox" class="peer sr-only service-checkbox" value="Whole Blood">
                            <div class="p-4 rounded-xl border border-slate-200 text-center hover:bg-slate-50 transition h-full flex flex-col items-center justify-center gap-2">
                                <i class="fa-solid fa-droplet text-slate-300 text-xl"></i>
                                <span class="text-sm font-semibold">Whole Blood</span>
                            </div>
                        </label>
                        <label class="cursor-pointer relative">
                            <input type="checkbox" class="peer sr-only service-checkbox" value="Platelets">
                            <div class="p-4 rounded-xl border border-slate-200 text-center hover:bg-slate-50 transition h-full flex flex-col items-center justify-center gap-2">
                                <i class="fa-solid fa-layer-group text-slate-300 text-xl"></i>
                                <span class="text-sm font-semibold">Platelets</span>
                            </div>
                        </label>
                        <label class="cursor-pointer relative">
                            <input type="checkbox" class="peer sr-only service-checkbox" value="Stem Cell">
                            <div class="p-4 rounded-xl border border-slate-200 text-center hover:bg-slate-50 transition h-full flex flex-col items-center justify-center gap-2">
                                <i class="fa-solid fa-dna text-slate-300 text-xl"></i>
                                <span class="text-sm font-semibold">Stem Cell Drives</span>
                            </div>
                        </label>
                        <label class="cursor-pointer relative">
                            <input type="checkbox" class="peer sr-only service-checkbox" value="Rare Blood">
                            <div class="p-4 rounded-xl border border-slate-200 text-center hover:bg-slate-50 transition h-full flex flex-col items-center justify-center gap-2">
                                <i class="fa-solid fa-flask text-slate-300 text-xl"></i>
                                <span class="text-sm font-semibold">Rare Blood</span>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-6">
                    <div>
                        <label class="block text-sm font-bold text-slate-700 mb-3">Rare Blood-Group Stock Management?</label>
                        <div class="flex gap-6">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="radio" name="rare_mgmt" value="yes" class="w-5 h-5 text-red-600 border-slate-300 focus:ring-red-500">
                                <span class="text-slate-700">Yes</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="radio" name="rare_mgmt" value="no" checked class="w-5 h-5 text-red-600 border-slate-300 focus:ring-red-500">
                                <span class="text-slate-700">No</span>
                            </label>
                        </div>
                    </div>

                    <div class="bg-red-50 border border-red-100 rounded-xl p-4">
                        <label class="flex items-start gap-3 cursor-pointer">
                            <input type="checkbox" id="urgentAlert" checked class="w-5 h-5 text-red-600 mt-0.5 border-slate-300 rounded focus:ring-red-500">
                            <div>
                                <span class="font-bold text-red-800 text-sm">Urgent Alert Participation</span>
                                <p class="text-xs text-red-600 mt-1">I agree to receive emergency inventory check requests for critical cases in my vicinity.</p>
                            </div>
                        </label>
                    </div>
                </div>
            </section>

            <!-- SECTION 4: ACCOUNT SECURITY -->
            <section class="bg-white p-8 rounded-2xl shadow-sm border border-slate-200 form-section">
                <h2 class="text-lg font-bold text-slate-800 mb-6 flex items-center gap-3 border-b border-slate-100 pb-4">
                    <span class="flex items-center justify-center w-8 h-8 rounded-full bg-red-100 text-red-600 text-sm font-bold">4</span>
                    Account Security & Verification
                </h2>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-bold text-slate-700 mb-2">Username <span class="text-red-500">*</span></label>
                        <input type="text" id="username" required placeholder="Create a username" class="w-full p-3 bg-slate-50 border border-slate-300 rounded-xl outline-none focus-input transition">
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-slate-700 mb-2">Verification Document <span class="text-red-500">*</span></label>
                        <input type="file" id="docUpload" required class="w-full p-2 border border-slate-300 rounded-xl bg-slate-50 text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-bold file:bg-red-50 file:text-red-700 hover:file:bg-red-100 cursor-pointer">
                        <p class="text-xs text-slate-400 mt-1">Upload valid License Copy (PDF/JPG, Max 2MB).</p>
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-slate-700 mb-2">Password <span class="text-red-500">*</span></label>
                        <input type="password" id="password" required class="w-full p-3 bg-slate-50 border border-slate-300 rounded-xl outline-none focus-input transition">
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-slate-700 mb-2">Confirm Password <span class="text-red-500">*</span></label>
                        <input type="password" id="confirmPassword" required class="w-full p-3 bg-slate-50 border border-slate-300 rounded-xl outline-none focus-input transition">
                        <p class="hidden text-xs text-red-500 mt-1" id="passError">Passwords do not match.</p>
                    </div>
                </div>

                <div class="border-t border-slate-100 mt-8 pt-6">
                    <label class="flex items-center gap-3 cursor-pointer mb-6">
                        <input type="checkbox" id="terms" required class="w-5 h-5 text-red-600 border-slate-300 rounded focus:ring-red-500">
                        <span class="text-sm text-slate-600">I agree to the <a href="#" class="text-red-600 underline font-medium">Terms & Conditions</a> and certify that the provided information is accurate.</span>
                    </label>

                    <button type="submit" id="submitBtn" class="w-full bg-slate-900 text-white font-bold text-lg py-4 rounded-xl shadow-lg hover:bg-slate-800 transition transform active:scale-[0.99] flex justify-center items-center gap-3">
                        <span>Create Account</span>
                        <i class="fa-solid fa-arrow-right"></i>
                    </button>
                </div>
            </section>
        </form>
    </main>

    <!-- FOOTER -->
    <footer class="bg-white border-t border-slate-200 py-8 mt-12 text-center">
        <p class="text-sm text-slate-500">Already have an account? <a href="login_form_bloodbank.html" class="text-red-600 font-bold hover:underline">Login here</a></p>
        <p class="text-xs text-slate-400 mt-2">Â© 2025 LifeLink+ Verified Network</p>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        function handleRegistration(event) {
            event.preventDefault();

            // --- DOM Elements ---
            const password = document.getElementById('password');
            const confirmPassword = document.getElementById('confirmPassword');
            const passError = document.getElementById('passError');
            const pincode = document.getElementById('pincode');
            const pinError = document.getElementById('pinError');
            const email = document.getElementById('email');
            const emailError = document.getElementById('emailError');
            const submitBtn = document.getElementById('submitBtn');

            let isValid = true;

            // --- 1. Password Validation ---
            if (password.value !== confirmPassword.value) {
                passError.classList.remove('hidden');
                confirmPassword.classList.add('border-red-500');
                isValid = false;
            } else {
                passError.classList.add('hidden');
                confirmPassword.classList.remove('border-red-500');
            }

            // --- 2. PIN Code Validation (Numeric & Length) ---
            const pinRegex = /^\d{6}$/;
            if (!pinRegex.test(pincode.value)) {
                pinError.classList.remove('hidden');
                pincode.classList.add('border-red-500');
                isValid = false;
            } else {
                pinError.classList.add('hidden');
                pincode.classList.remove('border-red-500');
            }

            // --- 3. Email Validation ---
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email.value)) {
                emailError.classList.remove('hidden');
                email.classList.add('border-red-500');
                isValid = false;
            } else {
                emailError.classList.add('hidden');
                email.classList.remove('border-red-500');
            }

            if (!isValid) {
                // Scroll to top or first error could be added here
                return;
            }

            // --- 4. Collect Data ---
            // Collecting Checkbox Values
            const selectedServices = Array.from(document.querySelectorAll('.service-checkbox:checked')).map(cb => cb.value);
            const rareMgmt = document.querySelector('input[name="rare_mgmt"]:checked').value;
            const urgentAlert = document.getElementById('urgentAlert').checked;

            const formData = {
                name: document.getElementById('bankName').value,
                parentHospital: document.getElementById('parentHospital').value,
                category: document.getElementById('category').value,
                license: document.getElementById('licenseNo').value,
                contactPerson: document.getElementById('contactName').value,
                mobile: document.getElementById('mobile').value,
                email: email.value,
                address: {
                    line1: document.getElementById('address1').value,
                    line2: document.getElementById('address2').value,
                    city: document.getElementById('city').value,
                    state: document.getElementById('state').value,
                    pincode: pincode.value
                },
                services: selectedServices,
                rareBloodManagement: rareMgmt,
                urgentAlerts: urgentAlert,
                username: document.getElementById('username').value,
                // Note: In a real app, don't log passwords or send them plainly if possible
            };

            console.log("Form Data Prepared:", formData);

            // --- 5. API Interaction (Simulation) ---
            
            // UI Feedback
            const originalBtnText = submitBtn.innerHTML;
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> Processing...';

            // // TODO: send form data to '/api/registerBloodBank'
            // fetch('/api/registerBloodBank', {
            //     method: 'POST',
            //     headers: { 'Content-Type': 'application/json' },
            //     body: JSON.stringify(formData)
            // }).then(...)

            // Simulate Success
            setTimeout(() => {
                alert("Registration Successful! Your account is pending verification.");
                submitBtn.innerHTML = originalBtnText;
                submitBtn.disabled = false;
                // window.location.href = '/login';
            }, 1500);
        }
    </script>
</body>
</html>